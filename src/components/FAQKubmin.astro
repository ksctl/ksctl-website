---
import Container from "./Container.astro";
---

<div id="faq" class="py-24 bg-gradient-to-b from-white to-gray-50 dark:from-gray-900 dark:to-gray-800 relative overflow-hidden">
  <!-- Decorative elements -->
  <div class="absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-transparent via-purple-500/30 to-transparent"></div>
  <div class="absolute inset-0 overflow-hidden pointer-events-none">
    <div class="absolute -top-40 right-0 w-96 h-96 bg-gradient-to-br from-purple-500/10 to-indigo-400/5 dark:from-purple-500/5 dark:to-indigo-400/5 blur-3xl"></div>
    <div class="absolute -bottom-40 -left-20 w-80 h-80 bg-gradient-to-tr from-indigo-300/10 to-violet-300/5 dark:from-indigo-700/10 dark:to-violet-700/5 blur-3xl"></div>
  </div>

  <Container>
    <div class="mb-20 space-y-4 text-center">
      <span class="inline-flex items-center rounded-full px-4 py-1.5 text-sm font-medium bg-purple-100 dark:bg-purple-900/30 text-purple-600 dark:text-purple-400 mb-6 border border-purple-200 dark:border-purple-800/30">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 mr-1.5" viewBox="0 0 20 20" fill="currentColor">
          <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-3a1 1 0 00-.867.5 1 1 0 11-1.731-1A3 3 0 0113 8a3.001 3.001 0 01-2 2.83V11a1 1 0 11-2 0v-1a1 1 0 011-1 1 1 0 100-2zm0 8a1 1 0 100-2 1 1 0 000 2z" clip-rule="evenodd" />
        </svg>
        Common Questions
      </span>
      <h2 class="text-4xl font-bold text-gray-900 dark:text-white md:text-5xl lg:text-6xl tracking-tight">
        Frequently Asked <span class="bg-gradient-to-r from-purple-600 to-indigo-500 dark:from-purple-400 dark:to-indigo-400 bg-clip-text text-transparent">Questions</span>
      </h2>
      <p class="mx-auto max-w-2xl text-xl text-gray-600 dark:text-gray-300">
        Everything you need to know about kubmin and sustainable workload management
      </p>
    </div>

    <div class="max-w-3xl mx-auto">
      <div class="space-y-6">
        <!-- FAQ Item 1 -->
        <div class="faq-item bg-white dark:bg-gray-800/70 rounded-2xl shadow-xl border border-gray-100 dark:border-gray-700/30 overflow-hidden">
          <button
            class="faq-question w-full flex items-center justify-between p-6 text-left"
            aria-expanded="false"
          >
            <h3 class="text-xl font-semibold text-gray-900 dark:text-white">What is kubmin?</h3>
            <svg class="faq-icon h-6 w-6 text-purple-600 dark:text-purple-400 transition-transform duration-300" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
            </svg>
          </button>
          <div class="faq-answer px-6 pb-6 hidden" style="display: none;">
            <p class="text-gray-600 dark:text-gray-300">
              kubmin is a sustainable workload management platform for Kubernetes. It provides per-image SCI (Software Carbon Intensity) scoring, built-in Prometheus monitoring, and multi-cluster management. kubmin helps you track, monitor, and optimize your workloads' carbon footprint with hourly granularity, making it easy to meet sustainability goals while managing resources efficiently.
            </p>
          </div>
        </div>

        <!-- FAQ Item 2 -->
        <div class="faq-item bg-white dark:bg-gray-800/70 rounded-2xl shadow-xl border border-gray-100 dark:border-gray-700/30 overflow-hidden">
          <button
            class="faq-question w-full flex items-center justify-between p-6 text-left"
            aria-expanded="false"
          >
            <h3 class="text-xl font-semibold text-gray-900 dark:text-white">What is SCI scoring and why should I care?</h3>
            <svg class="faq-icon h-6 w-6 text-purple-600 dark:text-purple-400 transition-transform duration-300" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
            </svg>
          </button>
          <div class="faq-answer px-6 pb-6 hidden" style="display: none;">
            <p class="text-gray-600 dark:text-gray-300 mb-4">
              Software Carbon Intensity (SCI) is a standardized metric from the Green Software Foundation that measures carbon emissions per functional unit. kubmin tracks SCI at the container image level, giving you unprecedented visibility into your application's carbon footprint.
            </p>
            <p class="text-gray-600 dark:text-gray-300">
              This helps you make data-driven decisions about sustainability, meet ESG (Environmental, Social, and Governance) goals, and identify opportunities to reduce both environmental impact and costs. SCI scoring also builds trust by providing verifiable metrics for your sustainability claims.
            </p>
          </div>
        </div>

        <!-- FAQ Item 3 -->
        <div class="faq-item bg-white dark:bg-gray-800/70 rounded-2xl shadow-xl border border-gray-100 dark:border-gray-700/30 overflow-hidden">
          <button
            class="faq-question w-full flex items-center justify-between p-6 text-left"
            aria-expanded="false"
          >
            <h3 class="text-xl font-semibold text-gray-900 dark:text-white">Do I need to configure Prometheus manually?</h3>
            <svg class="faq-icon h-6 w-6 text-purple-600 dark:text-purple-400 transition-transform duration-300" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
            </svg>
          </button>
          <div class="faq-answer px-6 pb-6 hidden" style="display: none;">
            <p class="text-gray-600 dark:text-gray-300 mb-4">
              No! kubmin deploys a ready-to-use Prometheus stack automatically when you enable monitoring. All scrape targets, dashboards, and alerting rules are pre-configured for immediate insights.
            </p>
            <p class="text-gray-600 dark:text-gray-300">
              You can customize the configuration later if needed, but it works out of the box with sensible defaults tailored for workload sustainability monitoring.
            </p>
          </div>
        </div>

        <!-- FAQ Item 4 -->
        <div class="faq-item bg-white dark:bg-gray-800/70 rounded-2xl shadow-xl border border-gray-100 dark:border-gray-700/30 overflow-hidden">
          <button
            class="faq-question w-full flex items-center justify-between p-6 text-left"
            aria-expanded="false"
          >
            <h3 class="text-xl font-semibold text-gray-900 dark:text-white">How does pricing work?</h3>
            <svg class="faq-icon h-6 w-6 text-purple-600 dark:text-purple-400 transition-transform duration-300" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
            </svg>
          </button>
          <div class="faq-answer px-6 pb-6 hidden" style="display: none;">
            <p class="text-gray-600 dark:text-gray-300 mb-4">
              We charge a fixed monthly fee. There are no hidden costs, no per-metric charges, and no surprise bills.
            </p>
            <ul class="list-disc pl-6 space-y-2 text-gray-600 dark:text-gray-300">
              <li>Simple pricing: Pay only for what you monitor</li>
              <li>Unlimited SCI tracking included currently 2 days</li>
              <li>Built-in Prometheus and Grafana at no extra cost</li>
            </ul>
          </div>
        </div>

        <!-- FAQ Item 5 -->
        <div class="faq-item bg-white dark:bg-gray-800/70 rounded-2xl shadow-xl border border-gray-100 dark:border-gray-700/30 overflow-hidden">
          <button
            class="faq-question w-full flex items-center justify-between p-6 text-left"
            aria-expanded="false"
          >
            <h3 class="text-xl font-semibold text-gray-900 dark:text-white">Can I use kubmin with my existing clusters?</h3>
            <svg class="faq-icon h-6 w-6 text-purple-600 dark:text-purple-400 transition-transform duration-300" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
            </svg>
          </button>
          <div class="faq-answer px-6 pb-6 hidden" style="display: none;">
            <p class="text-gray-600 dark:text-gray-300 mb-4">
              Yes! kubmin can connect to any Kubernetes cluster—EKS, AKS, GKE, or self-managed. You don't need to recreate your infrastructure.
            </p>
            <p class="text-gray-600 dark:text-gray-300">
              For new clusters, kubmin integrates seamlessly with kli for sustainable cluster creation.
            </p>
          </div>
        </div>

        <!-- FAQ Item 6 -->
        <div class="faq-item bg-white dark:bg-gray-800/70 rounded-2xl shadow-xl border border-gray-100 dark:border-gray-700/30 overflow-hidden">
          <button
            class="faq-question w-full flex items-center justify-between p-6 text-left"
            aria-expanded="false"
          >
            <h3 class="text-xl font-semibold text-gray-900 dark:text-white">Is kubmin production-ready?</h3>
            <svg class="faq-icon h-6 w-6 text-purple-600 dark:text-purple-400 transition-transform duration-300" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
            </svg>
          </button>
          <div class="faq-answer px-6 pb-6 hidden" style="display: none;">
            <p class="text-gray-600 dark:text-gray-300 mb-4">
              kubmin is currently in MVP/Beta stage. The core features—SCI tracking, Prometheus integration, and cluster management—are stable and being used by early adopters.
            </p>
            <p class="text-gray-600 dark:text-gray-300 mb-4">
              We're actively developing advanced features like:
            </p>
            <ul class="list-disc pl-6 space-y-2 text-gray-600 dark:text-gray-300">
              <li>Docker Compose-like simplicity for Kubernetes</li>
              <li>OpenTelemetry integration for distributed tracing</li>
              <li>Enhanced security and compliance features</li>
            </ul>
            <p class="text-gray-600 dark:text-gray-300 mt-4">
              Beta users get priority support and influence our roadmap. Join our early adopter community to shape kubmin's future!
            </p>
          </div>
        </div>
      </div>

      <div class="mt-12 text-center">
        <p class="text-lg text-gray-600 dark:text-gray-300">
          Still have questions? We're here to help!
        </p>
        <div class="mt-6 flex flex-wrap justify-center gap-4">
          <a
            href="https://kubmin.ksctl.com"
            target="_blank"
            class="inline-flex items-center px-6 py-3 rounded-lg bg-purple-100 dark:bg-purple-900/30 text-purple-600 dark:text-purple-400 font-medium hover:bg-purple-200 dark:hover:bg-purple-800/30 transition-colors"
          >
            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" viewBox="0 0 20 20" fill="currentColor">
              <path d="M11 3a1 1 0 100 2h2.586l-6.293 6.293a1 1 0 101.414 1.414L15 6.414V9a1 1 0 102 0V4a1 1 0 00-1-1h-5z" />
              <path d="M5 5a2 2 0 00-2 2v8a2 2 0 002 2h8a2 2 0 002-2v-3a1 1 0 10-2 0v3H5V7h3a1 1 0 000-2H5z" />
            </svg>
            Try kubmin Beta
          </a>
          <a
            href="https://discord.ksctl.com"
            target="_blank"
            class="inline-flex items-center px-6 py-3 rounded-lg bg-purple-600 text-white font-medium hover:bg-purple-700 transition-colors"
          >
            <svg class="h-5 w-5 mr-2" fill="currentColor" viewBox="0 0 24 24">
              <path d="M20.317 4.3698a19.7913 19.7913 0 00-4.8851-1.5152.0741.0741 0 00-.0785.0371c-.211.3753-.4447.8648-.6083 1.2495-1.8447-.2762-3.68-.2762-5.4868 0-.1636-.3933-.4058-.8742-.6177-1.2495a.077.077 0 00-.0785-.037 19.7363 19.7363 0 00-4.8852 1.515.0699.0699 0 00-.0321.0277C.5334 9.0458-.319 13.5799.0992 18.0578a.0824.0824 0 00.0312.0561c2.0528 1.5076 4.0413 2.4228 5.9929 3.0294a.0777.0777 0 00.0842-.0276c.4616-.6304.8731-1.2952 1.226-1.9942a.076.076 0 00-.0416-.1057c-.6528-.2476-1.2743-.5495-1.8722-.8923a.077.077 0 01-.0076-.1277c.1258-.0943.2517-.1923.3718-.2914a.0743.0743 0 01.0776-.0105c3.9278 1.7933 8.18 1.7933 12.0614 0a.0739.0739 0 01.0785.0095c.1202.099.246.1981.3728.2924a.077.077 0 01-.0066.1276 12.2986 12.2986 0 01-1.873.8914.0766.0766 0 00-.0407.1067c.3604.698.7719 1.3628 1.225 1.9932a.076.076 0 00.0842.0286c1.961-.6067 3.9495-1.5219 6.0023-3.0294a.077.077 0 00.0313-.0552c.5004-5.177-.8382-9.6739-3.5485-13.6604a.061.061 0 00-.0312-.0286zM8.02 15.3312c-1.1825 0-2.1569-1.0857-2.1569-2.419 0-1.3332.9555-2.4189 2.157-2.4189 1.2108 0 2.1757 1.0952 2.1568 2.419 0 1.3332-.9555 2.4189-2.1569 2.4189zm7.9748 0c-1.1825 0-2.1569-1.0857-2.1569-2.419 0-1.3332.9554-2.4189 2.1569-2.4189 1.2108 0 2.1757 1.0952 2.1568 2.419 0 1.3332-.946 2.4189-2.1568 2.4189Z"/>
            </svg>
            Join Community
          </a>
        </div>
      </div>
    </div>
  </Container>
</div>

<script>
  // FAQ Accordion functionality
  document.addEventListener('DOMContentLoaded', () => {
    const faqItems = document.querySelectorAll('.faq-item');

    faqItems.forEach(item => {
      const question = item.querySelector('.faq-question');
      const answer = item.querySelector('.faq-answer');
      const icon = item.querySelector('.faq-icon');

      question.addEventListener('click', () => {
        const expanded = question.getAttribute('aria-expanded') === 'true';

        // Close all other items
        faqItems.forEach(otherItem => {
          if (otherItem !== item) {
            const otherQuestion = otherItem.querySelector('.faq-question');
            const otherAnswer = otherItem.querySelector('.faq-answer');
            const otherIcon = otherItem.querySelector('.faq-icon');

            otherQuestion.setAttribute('aria-expanded', 'false');
            otherAnswer.classList.add('hidden');
            otherIcon.style.transform = 'rotate(0deg)';
          }
        });

        // Toggle current item
        question.setAttribute('aria-expanded', !expanded);
        if (!expanded) {
          // Show the answer first with zero height
          answer.classList.remove('hidden');
          answer.style.display = 'block';

          // Force browser reflow to ensure transitions work properly
          void answer.offsetHeight;

          // Expand to full height
          answer.style.maxHeight = answer.scrollHeight + 'px';
        } else {
          // Collapse to zero height
          answer.style.maxHeight = '0px';

          // Hide after transition completes
          setTimeout(() => {
            answer.classList.add('hidden');
            answer.style.display = 'none';
          }, 300); // Match the transition duration
        }
        icon.style.transform = !expanded ? 'rotate(180deg)' : 'rotate(0deg)';
      });
    });
  });
</script>

<style>
  .faq-answer {
    max-height: 0;
    overflow: hidden;
    transition: max-height 0.3s ease-out;
    opacity: 1;
    will-change: max-height;
  }

  .faq-answer:not(.hidden) {
    max-height: 1000px; /* Fallback max-height in case JS fails */
  }
</style>
